# RPC的（手続き呼び出し的）まとめ

## 概要

- **RPC（Remote Procedure Call）** は、ネットワーク越しにあたかもローカルの関数を呼び出すように処理を依頼する仕組み。
- RESTのように「リソース志向」ではなく、「処理（メソッド呼び出し）志向」。
- クライアントは「この関数を呼びたい」という意識でエンドポイントを叩く。

## 特徴

- 関数やメソッドを直接呼び出すイメージ。
- リソースの状態よりも「操作」に焦点。
- 通常は**専用のIDL**（Interface Definition Language）や定義ファイルを利用することが多い（例：gRPCでは`.proto`ファイル）。
- **同期処理**が基本だが、非同期呼び出しにも対応可能。

## メリット

- クライアントから見て直感的：「関数を呼ぶ」だけ。
- バイナリ通信（例：gRPC）を使えば高速・効率的。
- API設計がサービスの内部実装と近く、作りやすい。

## デメリット

- APIがサービス内部の関数に近いため、**外部公開に不向き**なことも。
- 実装依存が強く、疎結合を保ちにくい。
- ネットワーク障害を考慮しないと「ローカル関数のように」見えて誤解を生む。

## 主な技術例

- **gRPC**
  - Googleが開発したRPCフレームワーク
  - Protocol Buffers（protobuf）を利用
  - HTTP/2ベースで効率的
- **JSON-RPC**
  - JSON形式でやり取りするシンプルなRPC
  - Web系で軽量な実装によく使われる
- **XML-RPC**
  - 旧来のRPC方式。XMLを利用。

## RESTとの違い

| 項目       | REST               | RPC的                              |
| ---------- | ------------------ | ---------------------------------- |
| 主眼       | リソース（データ） | 処理（関数呼び出し）               |
| 表現       | URI + HTTPメソッド | メソッド名 + パラメータ            |
| 柔軟性     | 疎結合、進化に強い | 実装寄り、変更に弱い               |
| データ形式 | JSON, XMLなど自由  | gRPCはバイナリ、JSON-RPCはJSONなど |
| 例         | `GET /users/1`     | `getUser(1)`                       |
