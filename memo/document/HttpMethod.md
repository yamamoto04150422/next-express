# HTTPメソッドの性質

| メソッド | 用途               | 安全 (Safe) | べき等 (Idempotent) | キャッシュ  |
| -------- | ------------------ | ----------- | ------------------- | ----------- |
| GET      | リソース取得       | ◯           | ◯                   | ◯           |
| POST     | 新規作成・処理依頼 | ✗           | ✗                   | △（条件付） |
| PUT      | 全体更新（置換）   | ✗           | ◯                   | ✗           |
| DELETE   | 削除               | ✗           | ◯                   | ✗           |
| PATCH    | 部分更新           | ✗           | △（実装次第）       | ✗           |

- 安全 (Safe)

  リクエストを送ってもリソースの状態を変更しない（読み取り専用）。

- べき等 (Idempotent)

  同じリクエストを1回送っても100回送っても結果が変わらない。
  （例: DELETE は1回目で削除され、2回目以降は「すでにない」だけなので結果が変わらない＝べき等とされる）

- キャッシュ可能性

  基本的に GET はキャッシュ可能。他のメソッドは基本キャッシュされない。

# POST / PUT / PATCH の使い分け指針

| シーン                                         | 適するメソッド | 理由                                                                          |
| ---------------------------------------------- | -------------- | ----------------------------------------------------------------------------- |
| **新規リソース作成（IDはサーバーが決める）**   | POST           | サーバー側でIDを払い出すことが多い。例: `POST /users`                         |
| **新規リソース作成（クライアントがID指定）**   | PUT            | クライアントがIDを決められる場合に使える。例: `PUT /users/123`                |
| **リソースの全体置換**                         | PUT            | 送った内容でリソース全体を上書き。送信しなかったフィールドは消えるのが原則。  |
| **リソースの部分更新（フィールドの一部変更）** | PATCH          | 一部だけ変えたい場合に効率的。例: `PATCH /users/123 { "name": "新しい名前" }` |
| **複雑な処理やアクション（設計次第）**         | POST           | 例えば「注文確定」「メール送信」などリソースのCRUDに当てはまらない処理。      |
