# メソッド一覧

目的・特徴・大量データ時の考慮をまとめた

## 大量データ

途中終了できるメソッド`find, findIndex, some, every`を選ぶと効率的

全件処理が必須なら`map,filter`を使うが、データサイズ次第でパフォーマンスに注意

## APIレスポンス

基本は `map,filter,reduce` の組み合わせで加工する

ネストレスポンス（例: posts → comments）は `flatMap` が便利

## 可読性

複雑な reduce は可読性が落ちやすい → `map + filter` の組み合わせで書いた方が理解しやすい場合も多い

速度差は微小だが、早期終了できるかどうかが実運用で効く

| メソッド      | 使い方例                                   | 主な目的                               | 戻り値              | 処理終了タイミング     | 大量データ時の考慮                                | 特徴・用途                       |
| ------------- | ------------------------------------------ | -------------------------------------- | ------------------- | ---------------------- | ------------------------------------------------- | -------------------------------- |
| **find**      | `arr.find(x => x.id === 1)`                | 条件に一致する最初の要素を取得         | 要素 or `undefined` | 一致した時点で終了     | 先頭で見つかれば高速。大量データでも効率的        | 最初の1件だけ欲しい時に最適      |
| **findIndex** | `arr.findIndex(x => x.id === 1)`           | 条件に一致する最初のインデックスを取得 | 数値 or `-1`        | 一致した時点で終了     | `find` 同様、途中終了可能で効率的                 | インデックスが必要なときに使用   |
| **map**       | `arr.map(x => x.value * 2)`                | 各要素を変換して新しい配列を作成       | 新しい配列          | 最後まで処理           | 全件変換するので処理コスト大。中間配列も増える    | データ整形やUI描画用に便利       |
| **filter**    | `arr.filter(x => x.active)`                | 条件に一致する要素を抽出               | 新しい配列          | 最後まで処理           | 必ず全件走査 → 大量データで一部だけ必要なら非効率 | 複数要素をまとめて抽出           |
| **reduce**    | `arr.reduce((acc, x) => acc + x.value, 0)` | 配列を1つの値に集約                    | 単一の値            | 最後まで処理           | 集計・変換を効率的に行えるが可読性に注意          | 合計、オブジェクト変換などに柔軟 |
| **some**      | `arr.some(x => x.active)`                  | 条件を満たす要素が1つでもあるか判定    | `true` / `false`    | 一致した時点で終了     | 途中終了可能 → 大量データでも効率的               | 存在チェックに最適               |
| **every**     | `arr.every(x => x.active)`                 | すべての要素が条件を満たすか判定       | `true` / `false`    | 不一致が出た時点で終了 | 途中終了可能 → 大量データでも効率的               | 全件の条件チェック               |
| **forEach**   | `arr.forEach(x => console.log(x))`         | 各要素に副作用を実行                   | `undefined`         | 最後まで処理           | 必ず全件処理 → 大量データではコスト高             | break不可、副作用用途のみ        |
| **flat**      | `[1,[2,3]].flat()`                         | ネスト配列を平坦化                     | 新しい配列          | 最後まで処理           | ネストが深い場合はコスト増                        | 配列の正規化に便利               |
| **flatMap**   | `arr.flatMap(x => x.items)`                | map と flat を同時に実行               | 新しい配列          | 最後まで処理           | 中間配列を減らせるので map+flat より効率的        | ネストデータの変換               |
